<div class="container mx-auto p-5">
    <h1 class="text-2xl font-bold mb-4">Horarios de Negocio</h1>
    <table class="min-w-full bg-white border border-gray-300 mb-4">
      <thead>
        <tr>
          <th class="border px-4 py-2">Día</th>
          <th class="border px-4 py-2">Hora de Apertura</th>
          <th class="border px-4 py-2">Hora de Cierre</th>
          <th class="border px-4 py-2">Estado</th>
          <th class="border px-4 py-2">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (hour of businessHours; track hour) {
            <tr>
                <td class="border px-4 py-2">{{ hour.dayOfWeek }}</td>
                <td class="border px-4 py-2">{{ hour.isClosed ? 'Cerrado' : hour.openingTime }}</td>
                <td class="border px-4 py-2">{{ hour.isClosed ? 'Cerrado' : hour.closingTime }}</td>
                <td class="border px-4 py-2">{{ hour.status }}</td>
                <td class="border px-4 py-2">
                  <button (click)="openModal(hour)" class="bg-blue-500 text-white px-2 py-1 rounded">Editar</button>
                </td>
              </tr>
      
          }
      </tbody>
    </table>
  
    <h2 class="text-xl font-bold mt-8 mb-4">Días Especiales</h2>
    <table class="min-w-full bg-white border border-gray-300 mb-4">
      <thead>
        <tr>
          <th class="border px-4 py-2">Fecha</th>
          <th class="border px-4 py-2">Día de la Semana</th>
          <th class="border px-4 py-2">Estado</th>
          <th class="border px-4 py-2">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (specialDay of specialDays; track specialDays) {
            <tr>
                <td class="border px-4 py-2">{{ specialDay.date }}</td>
                <td class="border px-4 py-2">{{ getDayOfWeek(specialDay.date) }}</td>
                <td class="border px-4 py-2">{{ specialDay.isClosed ? 'Cerrado' : 'Abierto' }}</td>
                <td class="border px-4 py-2">
                  <button (click)="openSpecialDayModal(specialDay)" class="bg-blue-500 text-white px-2 py-1 rounded">Editar</button>
                </td>
              </tr>
        }
      </tbody>
    </table>
  
    <div class="mt-4">
      <button (click)="addSpecialDay()" class="bg-green-500 text-white px-4 py-2 rounded">Agregar Día Especial</button>
    </div>
  
    <!-- Modal para Horarios -->
    <div id="modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
      <div class="bg-white rounded p-6 w-96">
        <h2 class="text-lg font-bold mb-4">{{ isEditing ? 'Editar Horario' : 'Agregar Horario' }}</h2>
        <form [formGroup]="businessHourForm">
          <div class="mb-4">
            <label class="block">Día de la Semana:</label>
            <input formControlName="dayOfWeek" class="border rounded w-full" placeholder="Ej: Lunes" />
          </div>
          <div class="mb-4">
            <label class="block">Hora de Apertura:</label>
            <input type="time" formControlName="openingTime" class="border rounded w-full" />
          </div>
          <div class="mb-4">
            <label class="block">Hora de Cierre:</label>
            <input type="time" formControlName="closingTime" class="border rounded w-full" />
          </div>
          <div class="mb-4">
            <label class=" block">Estado:</label>
            <select formControlName="status" class="border rounded w-full">
              <option value="available">Disponible</option>
              <option value="unavailable">No Disponible</option>
            </select>
          </div>
          <div class="flex justify-end">
            <button type="button" (click)="saveChanges()" class="bg-blue-500 text-white px-4 py-2 rounded">Guardar</button>
            <button type="button" (click)="closeModal()" class="ml-2 bg-red-500 text-white px-4 py-2 rounded">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  
    <!-- Modal para Días Especiales -->
    <div id="special-day-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
      <div class="bg-white rounded p-6 w-96">
        <h2 class="text-lg font-bold mb-4">{{ isEditingSpecialDay ? 'Editar Día Especial' : 'Agregar Día Especial' }}</h2>
        <form [formGroup]="specialDayForm">
            <div class="mb-4">
              <label class="block">Fecha:</label>
              <input type="date" formControlName="date" class="border rounded w-full" />
            </div>
            <div class="mb-4">
              <label class="block">Si dejas el espacio en blanco se marcará como abierto:</label>
              <label class="block">Estado:</label>
              <input type="checkbox" formControlName="isClosed" class="mr-2" /> Cerrado
            </div>
            <div class="flex justify-end">
              <button type="button" (click)="saveSpecialDayChanges()" class="bg-blue-500 text-white px-4 py-2 rounded">Guardar</button>
              <button type="button" (click)="closeSpecialDayModal()" class="ml-2 bg-red-500 text-white px-4 py-2 rounded">Cancelar</button>
            </div>
          </form>
      </div>
    </div>
  </div>
  